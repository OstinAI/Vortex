<UserControl x:Class="Vortex.VortexDropLine"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Vortex"
             mc:Ignorable="d"
             d:DesignHeight="50" d:DesignWidth="800">

    <UserControl.Resources>

        <Storyboard x:Key="DropRunStoryboard">

            <!-- ================= КАПЛЯ 1 ================= -->

            <DoubleAnimation Storyboard.TargetName="GlowDrop1"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop1"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowOuter1"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowOuter1"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop1"
                             Storyboard.TargetProperty="(Canvas.Left)"
                             Duration="0:0:3"
                             From="0"
                             To="{Binding ActualWidth, ElementName=LineHost}">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="GlowOuter1"
                             Storyboard.TargetProperty="(Canvas.Left)"
                             Duration="0:0:3"
                             From="0"
                             To="{Binding ActualWidth, ElementName=LineHost}">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="GlowDrop1"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.30"
                             From="1" To="1.25"
                             Duration="0:0:0.25" AutoReverse="True"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop1"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.30"
                             From="1" To="1.4"
                             Duration="0:0:0.25" AutoReverse="True"/>


            <!-- ================= КАПЛЯ 2 ================= -->

            <DoubleAnimation Storyboard.TargetName="GlowDrop2"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.05"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop2"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.05"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowOuter2"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.05"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowOuter2"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.05"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop2"
                             Storyboard.TargetProperty="(Canvas.Left)"
                             BeginTime="0:0:0.05"
                             Duration="0:0:3"
                             From="0"
                             To="{Binding ActualWidth, ElementName=LineHost}">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="GlowOuter2"
                             Storyboard.TargetProperty="(Canvas.Left)"
                             BeginTime="0:0:0.05"
                             Duration="0:0:3"
                             From="0"
                             To="{Binding ActualWidth, ElementName=LineHost}">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="GlowDrop2"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.35"
                             From="1" To="1.25"
                             Duration="0:0:0.25" AutoReverse="True"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop2"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.35"
                             From="1" To="1.4"
                             Duration="0:0:0.25" AutoReverse="True"/>


            <!-- ================= КАПЛЯ 3 ================= -->

            <DoubleAnimation Storyboard.TargetName="GlowDrop3"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.10"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop3"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.10"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowOuter3"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.10"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowOuter3"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.10"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop3"
                             Storyboard.TargetProperty="(Canvas.Left)"
                             BeginTime="0:0:0.10"
                             Duration="0:0:3"
                             From="0"
                             To="{Binding ActualWidth, ElementName=LineHost}">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="GlowOuter3"
                             Storyboard.TargetProperty="(Canvas.Left)"
                             BeginTime="0:0:0.10"
                             Duration="0:0:3"
                             From="0"
                             To="{Binding ActualWidth, ElementName=LineHost}">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="GlowDrop3"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.40"
                             From="1" To="1.25"
                             Duration="0:0:0.25" AutoReverse="True"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop3"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.40"
                             From="1" To="1.4"
                             Duration="0:0:0.25" AutoReverse="True"/>


            <!-- ================= КАПЛЯ 4 ================= -->

            <DoubleAnimation Storyboard.TargetName="GlowDrop4"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.15"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop4"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.15"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowOuter4"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.15"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowOuter4"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.15"
                             From="0.1" To="1"
                             Duration="0:0:0.30"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop4"
                             Storyboard.TargetProperty="(Canvas.Left)"
                             BeginTime="0:0:0.15"
                             Duration="0:0:3"
                             From="0"
                             To="{Binding ActualWidth, ElementName=LineHost}">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="GlowOuter4"
                             Storyboard.TargetProperty="(Canvas.Left)"
                             BeginTime="0:0:0.15"
                             Duration="0:0:3"
                             From="0"
                             To="{Binding ActualWidth, ElementName=LineHost}">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="GlowDrop4"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                             BeginTime="0:0:0.45"
                             From="1" To="1.25"
                             Duration="0:0:0.25" AutoReverse="True"/>

            <DoubleAnimation Storyboard.TargetName="GlowDrop4"
                             Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                             BeginTime="0:0:0.45"
                             From="1" To="1.4"
                             Duration="0:0:0.25" AutoReverse="True"/>

        </Storyboard>

    </UserControl.Resources>


    <Grid>

        <Grid x:Name="LineHost"
              Height="3"
              VerticalAlignment="Top"
              ClipToBounds="True">

            <Rectangle Height="2"
                       Fill="#00FFFF"
                       Opacity="0.3"
                       HorizontalAlignment="Stretch"/>

            <Canvas>

                <Rectangle x:Name="GlowOuter1" Canvas.Top="-2"
                           Height="6" Width="15" Fill="#00FFFF"
                           RadiusX="3" RadiusY="3" Opacity="0.7">
                    <Rectangle.Effect>
                        <BlurEffect Radius="35"/>
                    </Rectangle.Effect>
                </Rectangle>

                <Rectangle x:Name="GlowDrop1" Canvas.Top="0"
                           Height="2" Width="20" Fill="#00FFFF" Opacity="1">
                    <Rectangle.RenderTransform>
                        <ScaleTransform/>
                    </Rectangle.RenderTransform>
                </Rectangle>

                <Rectangle x:Name="GlowOuter2" Canvas.Top="-2"
                           Height="6" Width="15" Fill="#00FFFF"
                           RadiusX="3" RadiusY="3" Opacity="0.7">
                    <Rectangle.Effect>
                        <BlurEffect Radius="35"/>
                    </Rectangle.Effect>
                </Rectangle>

                <Rectangle x:Name="GlowDrop2" Canvas.Top="0"
                           Height="2" Width="20" Fill="#00FFFF" Opacity="1">
                    <Rectangle.RenderTransform>
                        <ScaleTransform/>
                    </Rectangle.RenderTransform>
                </Rectangle>

                <Rectangle x:Name="GlowOuter3" Canvas.Top="-2"
                           Height="6" Width="15" Fill="#00FFFF"
                           RadiusX="3" RadiusY="3" Opacity="0.7">
                    <Rectangle.Effect>
                        <BlurEffect Radius="35"/>
                    </Rectangle.Effect>
                </Rectangle>

                <Rectangle x:Name="GlowDrop3" Canvas.Top="0"
                           Height="2" Width="20" Fill="#00FFFF" Opacity="1">
                    <Rectangle.RenderTransform>
                        <ScaleTransform/>
                    </Rectangle.RenderTransform>
                </Rectangle>

                <Rectangle x:Name="GlowOuter4" Canvas.Top="-2"
                           Height="6" Width="15" Fill="#00FFFF"
                           RadiusX="3" RadiusY="3" Opacity="0.7">
                    <Rectangle.Effect>
                        <BlurEffect Radius="35"/>
                    </Rectangle.Effect>
                </Rectangle>

                <Rectangle x:Name="GlowDrop4" Canvas.Top="0"
                           Height="2" Width="20" Fill="#00FFFF" Opacity="1">
                    <Rectangle.RenderTransform>
                        <ScaleTransform/>
                    </Rectangle.RenderTransform>
                </Rectangle>

            </Canvas>

        </Grid>

    </Grid>

</UserControl>
